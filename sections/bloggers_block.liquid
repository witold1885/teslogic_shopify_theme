<script type="text/javascript">
$(document).ready(async function() {
	const API_ENDPOINT = 'https://www.googleapis.com/youtube/v3/'
	const API_KEY = 'AIzaSyBIO_rLOupamMWN0yNCUUNREWNCFi_3zpc'
	const videoUrls = [
		'https://www.youtube.com/watch?v=fvmXjgCjxR0&ab_channel=LudicrousFeed',
		'https://www.youtube.com/watch?v=zRVyK_d3k48&t=2s&ab_channel=MikeSeussTesla',
		'https://www.youtube.com/watch?v=ugdLMiZlqNc&ab_channel=Gjeebs',
		'https://www.youtube.com/watch?v=eSLjxnThupg&ab_channel=CfTesla',
		'https://www.youtube.com/watch?v=m06bKl98Pws&ab_channel=BestInTESLA',
		'https://www.youtube.com/watch?v=PrWRb2_jfCE&ab_channel=i1Tesla',
	]

	for (let videoUrl of videoUrls) {
		const videoId = getVideoId(videoUrl)
		console.log(videoId)
		if (videoId) {
			let videoInfo = await getVideoInfo(videoId)
			console.log(videoInfo)
	        /*fetch(`${API_ENDPOINT}videos?key=${API_KEY}&id=${videoId}&part=snippet`)
	            .then(response => response.json())
	            .then(data => {
	            	console.log(data)
	                if (data.items.length > 0) {
	                    var channelId = data.items[0].snippet.channelId;
	                    getChannelInfoById(channelId);
	                } else {
	                    alert('Відео не знайдено.');
	                }
	            })
	            .catch(error => {
	                console.error('Помилка запиту до API: ', error);
	            });*/
		}
	}

	function getVideoId(videoUrl) {
	    let match = videoUrl.match(/[?&]v=([a-zA-Z0-9_-]+)/);
	    if (match) {
	        return match[1];
	    }
	    return null;
	}

	async function getVideoInfo(videoId) {
		let response = await fetch(`${API_ENDPOINT}videos?key=${API_KEY}&id=${videoId}&part=snippet`)
		let data = await response.json()
		return data
	}

	async function getChannelInfoById(channelId) {
		let response = await fetch(`${API_ENDPOINT}channels?key=${API_KEY}&id=${channelId}&part=snippet`)
		let data = await response.json()
		console.log(data)
	    /*fetch(`${API_ENDPOINT}channels?key=${API_KEY}&id=${channelId}&part=snippet`)
	        .then(response => response.json())
	        .then(data => {
	            if (data.items.length > 0) {
	                var channelInfo = data.items[0].snippet;
	                var channelTitle = channelInfo.title;
	                var channelThumbnailUrl = channelInfo.thumbnails.default.url;

	                document.getElementById('channelTitle').textContent = 'Назва каналу: ' + channelTitle;
	                document.getElementById('channelThumbnail').src = channelThumbnailUrl;
	            } else {
	                alert('Канал не знайдено.');
	            }
	        })
	        .catch(error => {
	            console.error('Помилка запиту до API: ', error);
	        });*/
	}
})
</script>